!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).SlimSelect={})}(this,(function(t){"use strict";function e(){return Math.random().toString(36).substring(2,10)}function s(t,e){function s(t,s){return s&&t&&t.classList&&t.classList.contains(s)||s&&t&&t.dataset&&t.dataset.id&&t.dataset.id===e?t:null}return s(t,e)||function t(e,i){return e&&e!==document?s(e,i)?e:t(e.parentNode,i):null}(t,e)}function i(t,e,s){var i;return void 0===e&&(e=50),void 0===s&&(s=!1),function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];var o=self,l=function(){i=null,s||t.apply(o,n)},r=s&&!i;clearTimeout(i),i=setTimeout(l,e),r&&t.apply(o,n)}}function n(t){var e=t.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(function(t){return"-"+t.toLowerCase()}));return t[0]===t[0].toUpperCase()?e.substring(1):e}var a=function(t){if(this.id=t.id&&""!==t.id?t.id:e(),this.label=t.label||"",this.options=[],t.options)for(var s=0,i=t.options;s<i.length;s++){var n=i[s];this.options.push(new o(n))}},o=function(t){this.id=t.id&&""!==t.id?t.id:e(),this.value=t.value||"",this.text=t.text||"",this.html=t.html||"",this.selected=void 0!==t.selected&&t.selected,this.display=void 0===t.display||t.display,this.disabled=void 0!==t.disabled&&t.disabled,this.mandatory=void 0!==t.mandatory&&t.mandatory,this.placeholder=void 0!==t.placeholder&&t.placeholder,this.class=t.class||"",this.style=t.style||"",this.data=t.data||{},this.value||(this.value=this.text)},l=function(){function t(t){this.data=[],this.setData(t)}return t.prototype.partialToFullData=function(t){var e=[];return t.forEach((function(t){if(t instanceof a||"label"in t){var s=[];"options"in t&&t.options&&t.options.forEach((function(t){s.push(new o(t))})),s.length>0&&e.push(new a(t))}(t instanceof o||"text"in t)&&e.push(new o(t))})),e},t.prototype.setData=function(t){this.data=this.partialToFullData(t)},t.prototype.getData=function(){return this.filter(null,!0)},t.prototype.getDataOptions=function(){return this.filter(null,!1)},t.prototype.addOption=function(t){this.data.push(new o(t))},t.prototype.setSelectedBy=function(t,e){for(var s=0,i=this.data;s<i.length;s++){var n=i[s];if(n instanceof a)for(var l=0,r=n.options;l<r.length;l++){var c=r[l];c[t]&&(c.selected=e.includes(c[t]))}n instanceof o&&n[t]&&(n.selected=e.includes(n[t]))}},t.prototype.getSelected=function(){return this.filter((function(t){return t.selected}),!0)},t.prototype.getSelectedOptions=function(){return this.filter((function(t){return t.selected}),!1)},t.prototype.getSelectedIDs=function(){var t=this.getSelected(),e=[];return t.forEach((function(t){t instanceof a?t.options.forEach((function(t){e.push(t.id)})):e.push(t.id)})),e},t.prototype.getSelectedValues=function(){var t=this.getSelectedOptions(),e=[];return t.forEach((function(t){e.push(t.value)})),e},t.prototype.getOptionByID=function(t){var e=this.filter((function(e){return e.id===t}),!1);return e.length?e[0]:null},t.prototype.search=function(t,e){return""===(t=t.trim())?[]:this.filter((function(s){return e?e(s,t):-1!==s.text.toLowerCase().indexOf(t.toLowerCase())}),!0)},t.prototype.filter=function(t,e){var s=[];return this.data.forEach((function(i){if(i instanceof a)if(e){var n=[];i.options.forEach((function(e){t&&!t(e)||n.push(new o(e))})),n.length>0&&s.push(new a({id:i.id,label:i.label,options:n}))}else i.options.forEach((function(e){t&&t(e)&&s.push(e)}));i instanceof o&&(t&&!t(i)||s.push(new o(i)))})),s},t}(),r=function(){function t(t,e,s){this.classes={main:"ss-main",openAbove:"ss-open-above",openBelow:"ss-open-below",placeholder:"ss-placeholder",values:"ss-values",single:"ss-single",value:"ss-value",valueText:"ss-value-text",valueDelete:"ss-value-delete",valueOut:"ss-value-out",deselect:"ss-deselect",deselectPath:"M10,10 L90,90 M10,90 L90,10",arrow:"ss-arrow",arrowClose:"M10,30 L50,70 L90,30",arrowOpen:"M10,70 L50,30 L90,70",content:"ss-content",open:"ss-open",search:"ss-search",searchHighlighter:"ss-search-highlight",searching:"ss-searching",addable:"ss-addable",addablePath:"M50,10 L50,90 M10,50 L90,50",list:"ss-list",optgroup:"ss-optgroup",optgroupLabel:"ss-optgroup-label",optgroupSelectable:"ss-optgroup-selectable",option:"ss-option",optionSelected:"ss-option-selected",optionDelete:"M10,10 L90,90 M10,90 L90,10",highlighted:"ss-highlighted",error:"ss-error",disabled:"ss-disabled",hide:"ss-hide"},this.store=e,this.settings=t,this.callbacks=s,this.main=this.mainDiv(),this.content=this.contentDiv(),this.renderValues(),this.renderOptions(this.store.getData()),this.settings.contentLocation.appendChild(this.content.main)}return t.prototype.enable=function(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1},t.prototype.disable=function(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0},t.prototype.open=function(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add("up"===this.settings.contentPosition?this.classes.openAbove:this.classes.openBelow),this.moveContent(),this.content.main.classList.add(this.classes.open),this.renderOptions(this.store.getData()),"up"===this.settings.contentPosition.toLowerCase()?this.moveContentAbove():"down"===this.settings.contentPosition.toLowerCase()?this.moveContentBelow():"up"===this.putContent(this.content.main,this.settings.isOpen)?this.moveContentAbove():this.moveContentBelow();var t=this.store.getSelectedOptions();if(t.length){var e=t[t.length-1].id,s=this.content.list.querySelector('[data-id="'+e+'"]');s&&this.ensureElementInView(this.content.list,s)}},t.prototype.close=function(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose),this.content.main.classList.remove(this.classes.open)},t.prototype.mainDiv=function(){var t=this,e=document.createElement("div");if(e.tabIndex=0,e.style.cssText=""!==this.settings.style?this.settings.style:"",e.className="",e.classList.add(this.settings.id),e.classList.add(this.classes.main),this.settings.class)for(var s=0,i=this.settings.class;s<i.length;s++){var n=i[s];""!==n.trim()&&e.classList.add(n.trim())}e.onfocus=function(){t.settings.isTabbing||t.callbacks.open()},e.onkeydown=function(e){switch(e.key){case"ArrowUp":case"ArrowDown":return t.callbacks.open(),"ArrowDown"===e.key?t.highlightDown():t.highlightUp(),!1;case"Tab":return t.callbacks.close(),!0;case"Enter":var s=t.content.list.querySelector("."+t.classes.highlighted);return s&&s.click(),!1;case"Escape":return t.callbacks.close(),!1}},e.onclick=function(e){t.settings.isEnabled&&(t.settings.isOpen?t.callbacks.close():t.callbacks.open())};var a=document.createElement("div");a.classList.add(this.classes.values),e.appendChild(a);var o=document.createElement("div");o.classList.add(this.classes.deselect),this.settings.allowDeselect&&!this.settings.isMultiple||o.classList.add(this.classes.hide),o.onclick=function(e){e.stopPropagation(),t.settings.isEnabled&&t.callbacks.setSelected([""],!1)};var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox","0 0 100 100");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",this.classes.deselectPath),l.appendChild(r),o.appendChild(l),e.appendChild(o);var c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add(this.classes.arrow),c.setAttribute("viewBox","0 0 100 100");var h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",this.classes.arrowClose),c.appendChild(h),e.appendChild(c),{main:e,values:a,deselect:{main:o,svg:l,path:r},arrow:{main:c,path:h}}},t.prototype.placeholder=function(){var t=this.store.filter((function(t){return t.placeholder}),!1),e=this.settings.placeholderText;t.length&&(this.settings.useHtml&&""!==t[0].html&&(e=t[0].html),this.settings.useHtml||""===t[0].text||(e=t[0].text));var s=document.createElement("div");return s.classList.add(this.classes.placeholder),s.innerHTML=e,s},t.prototype.renderValues=function(){this.settings.isMultiple?this.renderMultipleValues():this.renderSingleValue()},t.prototype.renderSingleValue=function(){var t=this.store.filter((function(t){return t.selected&&!t.placeholder}),!1),e=t.length>0?t[0]:null;if(e){var s=document.createElement("div");s.classList.add(this.classes.single),s.innerHTML=e.html&&!this.settings.useHtml?e.html:e.text,this.main.values.innerHTML=s.outerHTML}else this.main.values.innerHTML=this.placeholder().outerHTML;this.settings.allowDeselect&&t.length?this.main.deselect.main.classList.remove(this.classes.hide):this.main.deselect.main.classList.add(this.classes.hide)},t.prototype.renderMultipleValues=function(){var t=this,e=this.main.values.childNodes,s=this.store.filter((function(t){return t.selected&&t.display}),!1);if(0!==s.length){var i=this.main.values.querySelector("."+this.classes.placeholder);i&&i.remove();for(var n=[],a=function(t){var i=e[t],a=i.getAttribute("data-id");a&&(s.filter((function(t){return t.id===a}),!1).length||n.push(i))},o=0;o<e.length;o++)a(o);for(var l=function(e){e.classList.add(r.classes.valueOut),setTimeout((function(){t.main.values.removeChild(e)}),100)},r=this,c=0,h=n;c<h.length;c++){l(h[c])}e=this.main.values.childNodes;for(var d=0;d<s.length;d++){var p=!0;for(o=0;o<e.length;o++)s[d].id===String(e[o].dataset.id)&&(p=!1);p&&(0===e.length?this.main.values.appendChild(this.multipleValue(s[d])):0===d?this.main.values.insertBefore(this.multipleValue(s[d]),e[d]):e[d-1].insertAdjacentElement("afterend",this.multipleValue(s[d])))}}else this.main.values.innerHTML=this.placeholder().outerHTML},t.prototype.multipleValue=function(t){var e=this,s=document.createElement("div");s.classList.add(this.classes.value),s.dataset.id=t.id;var i=document.createElement("div");if(i.classList.add(this.classes.valueText),i.innerHTML=t.html&&!0!==this.settings.useHtml?t.html:t.text,s.appendChild(i),!t.mandatory){var n=document.createElement("div");n.classList.add(this.classes.valueDelete),n.onclick=function(s){s.preventDefault(),s.stopPropagation();var i=!0,n=e.store.getSelectedOptions(),l=n.filter((function(e){return e.selected&&e.id!==t.id}),!0);if(!(e.settings.minSelected&&l.length<e.settings.minSelected)&&(e.callbacks.beforeChange&&(i=!0===e.callbacks.beforeChange(n,l)),i)){for(var r=[],c=0,h=l;c<h.length;c++){var d=h[c];if(d instanceof a)for(var p=0,u=d.options;p<u.length;p++){var g=u[p];r.push(g.value)}d instanceof o&&r.push(d.value)}e.callbacks.setSelected(r,e.settings.closeOnSelect),e.callbacks.afterChange&&e.callbacks.afterChange(l)}};var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox","0 0 100 100");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",this.classes.optionDelete),l.appendChild(r),n.appendChild(l),s.appendChild(n)}return s},t.prototype.contentDiv=function(){var t=document.createElement("div");if(t.classList.add(this.classes.content),t.dataset.id=this.settings.id,""!==this.settings.style&&(t.style.cssText=this.settings.style),this.settings.class.length)for(var e=0,s=this.settings.class;e<s.length;e++){var i=s[e];""!==i.trim()&&t.classList.add(i.trim())}var n=this.searchDiv();t.appendChild(n.main);var a=this.listDiv();return t.appendChild(a),{main:t,search:n,list:a}},t.prototype.moveContent=function(){var t=this.main.main.getBoundingClientRect();this.content.main.style.top=t.top+t.height+window.scrollY+"px",this.content.main.style.left=t.left+window.scrollX+"px",this.content.main.style.width=t.width+"px"},t.prototype.searchDiv=function(){var t=this,e=document.createElement("div"),s=document.createElement("input"),n=document.createElement("div");e.classList.add(this.classes.search);var a={main:e,input:s};if(this.settings.showSearch||(e.classList.add(this.classes.hide),s.readOnly=!0),s.type="search",s.placeholder=this.settings.searchPlaceholder,s.tabIndex=-1,s.setAttribute("aria-label",this.settings.searchPlaceholder),s.setAttribute("autocapitalize","off"),s.setAttribute("autocomplete","off"),s.setAttribute("autocorrect","off"),s.oninput=i((function(e){t.callbacks.search(e.target.value)}),100),s.onkeydown=function(e){switch(e.key){case"ArrowUp":case"ArrowDown":return t.callbacks.open(),"ArrowDown"===e.key?t.highlightDown():t.highlightUp(),!1;case"Tab":return t.settings.isTabbing=!0,t.main.main.focus(),t.callbacks.close(),setTimeout((function(){t.settings.isTabbing=!1}),200),!0;case"Escape":return t.callbacks.close(),!1;case"Enter":if(t.callbacks.addable&&e.ctrlKey)n.click();else{var s=t.content.list.querySelector("."+t.classes.highlighted);s&&s.click()}return!1}},s.onfocus=function(){t.settings.isOpen||t.callbacks.open()},e.appendChild(s),this.callbacks.addable){n.classList.add(this.classes.addable);var l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox","0 0 100 100");var r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",this.classes.addablePath),l.appendChild(r),n.appendChild(l),n.onclick=function(e){if(e.preventDefault(),e.stopPropagation(),t.callbacks.addable){var s=t.content.search.input.value.trim();if(""!==s){var i=t.callbacks.addable(s);"string"==typeof i?t.callbacks.addOption(new o({text:i,value:i})):t.callbacks.addOption(new o(i)),t.callbacks.setSelected([s],t.settings.closeOnSelect),t.callbacks.search(""),t.settings.closeOnSelect&&setTimeout((function(){t.callbacks.close()}),100)}else t.content.search.input.focus()}},e.appendChild(n),a.addable={main:n,svg:l,path:r}}return a},t.prototype.highlightUp=function(){var t=this.content.list.querySelector("."+this.classes.highlighted),e=null;if(t)for(e=t.previousSibling;null!==e&&e.classList.contains(this.classes.disabled);)e=e.previousSibling;else{var s=this.content.list.querySelectorAll("."+this.classes.option+":not(."+this.classes.disabled+")");e=s[s.length-1]}if(e&&e.classList.contains(this.classes.optgroupLabel)&&(e=null),null===e){var i=t.parentNode;if(i.classList.contains(this.classes.optgroup)&&i.previousSibling){var n=i.previousSibling.querySelectorAll("."+this.classes.option+":not(."+this.classes.disabled+")");n.length&&(e=n[n.length-1])}}e&&(t&&t.classList.remove(this.classes.highlighted),e.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,e))},t.prototype.highlightDown=function(){var t=this.content.list.querySelector("."+this.classes.highlighted),e=null;if(t)for(e=t.nextSibling;null!==e&&e.classList.contains(this.classes.disabled);)e=e.nextSibling;else e=this.content.list.querySelector("."+this.classes.option+":not(."+this.classes.disabled+")");if(null===e&&null!==t){var s=t.parentNode;if(s.classList.contains(this.classes.optgroup))if(s.nextSibling)e=s.nextSibling.querySelector("."+this.classes.option+":not(."+this.classes.disabled+")")}e&&(t&&t.classList.remove(this.classes.highlighted),e.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,e))},t.prototype.listDiv=function(){var t=document.createElement("div");return t.classList.add(this.classes.list),t.setAttribute("role","listbox"),t},t.prototype.renderError=function(t){this.content.list.innerHTML="";var e=document.createElement("div");e.classList.add(this.classes.error),e.textContent=t,this.content.list.appendChild(e)},t.prototype.renderSearching=function(){this.content.list.innerHTML="";var t=document.createElement("div");t.classList.add(this.classes.searching),t.textContent=this.settings.searchingText,this.content.list.appendChild(t)},t.prototype.renderOptions=function(t){var e=this;if(this.content.list.innerHTML="",0===t.length){var s=document.createElement("div");return s.classList.add(this.classes.option),s.classList.add(this.classes.disabled),s.innerHTML=this.settings.searchText,void this.content.list.appendChild(s)}for(var i=function(t){if(t instanceof a){var s=document.createElement("div");s.classList.add(n.classes.optgroup);var i=document.createElement("div");i.classList.add(n.classes.optgroupLabel),i.innerHTML=t.label,n.settings.selectByGroup&&n.settings.isMultiple&&(i.classList.add(n.classes.optgroupSelectable),i.addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();for(var i=0,n=s.children;i<n.length;i++){var a=n[i];-1!==a.className.indexOf(e.classes.option)&&a.click()}}))),s.appendChild(i);for(var l=0,r=t.options;l<r.length;l++){var c=r[l];s.appendChild(n.option(c))}n.content.list.appendChild(s)}t instanceof o&&n.content.list.appendChild(n.option(t))},n=this,l=0,r=t;l<r.length;l++){i(r[l])}},t.prototype.option=function(t){var e=this;if(t.placeholder){var s=document.createElement("div");return s.classList.add(this.classes.option),s.classList.add(this.classes.hide),s}var i=document.createElement("div");if(i.dataset.id=t.id,i.classList.add(this.classes.option),i.setAttribute("role","option"),t.class&&t.class.split(" ").forEach((function(t){i.classList.add(t)})),t.style&&(i.style.cssText=t.style),this.settings.searchHighlight&&""!==this.content.search.input.value.trim()){var n=this.settings.useHtml?t.html:t.text;i.innerHTML=this.highlight(n,this.content.search.input.value,this.classes.searchHighlighter)}else t.html&&""!==t.html?i.innerHTML=t.html:i.textContent=t.text;return this.settings.showOptionTooltips&&i.textContent&&i.setAttribute("title",i.textContent),(t.selected&&!this.settings.allowDeselect||t.disabled&&!this.settings.allowDeselect)&&i.classList.add(this.classes.disabled),t.selected&&this.settings.hideSelected&&i.classList.add(this.classes.hide),t.selected?i.classList.add(this.classes.optionSelected):i.classList.remove(this.classes.optionSelected),i.addEventListener("click",(function(s){s.preventDefault(),s.stopPropagation();var i=e.store.getSelectedOptions(),n=s.target,a=String(n.dataset.id);if(!(t.disabled||t.selected&&!e.settings.allowDeselect||e.settings.isMultiple&&Array.isArray(i)&&e.settings.maxSelected<=i.length)){var o=!1,l=e.store.getSelectedOptions(),r=[];e.settings.isMultiple&&(r=t.selected?l.filter((function(t){return t.id!==a})):l.concat(t)),e.settings.isMultiple||(r=t.selected?[]:[t]),e.callbacks.beforeChange||(o=!0),e.callbacks.beforeChange&&(o=!1!==e.callbacks.beforeChange(r,l)),o&&(e.store.getOptionByID(a)||e.callbacks.addOption(t),e.callbacks.setSelected(r.map((function(t){return t.value})),e.settings.closeOnSelect),e.callbacks.afterChange&&e.callbacks.afterChange(r))}})),i},t.prototype.destroy=function(){this.main.main.remove(),this.content.main.remove()},t.prototype.highlight=function(t,e,s){var i=t,n=new RegExp("("+e.trim()+")(?![^<]*>[^<>]*</)","i");if(!t.match(n))return t;var a=t.match(n).index,o=a+t.match(n)[0].toString().length,l=t.substring(a,o);return i=i.replace(n,'<mark class="'.concat(s,'">').concat(l,"</mark>"))},t.prototype.moveContentAbove=function(){var t=this.main.main.offsetHeight+this.content.main.offsetHeight-1;this.content.main.style.margin="-"+t+"px 0px 0px 0px",this.content.main.style.transformOrigin="center bottom",this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove)},t.prototype.moveContentBelow=function(){this.content.main.style.margin="-1px 0px 0px 0px",this.content.main.style.transformOrigin="center top",this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow)},t.prototype.ensureElementInView=function(t,e){var s=t.scrollTop+t.offsetTop,i=s+t.clientHeight,n=e.offsetTop,a=n+e.clientHeight;n<s?t.scrollTop-=s-n:a>i&&(t.scrollTop+=a-i)},t.prototype.putContent=function(t,e){var s=t.offsetHeight,i=t.getBoundingClientRect(),n=e?i.top:i.top-s,a=e?i.bottom:i.bottom+s;return n<=0?"down":a>=window.innerHeight?"up":"down"},t}(),c=function(){function t(t){this.listen=!1,this.observer=null,this.select=t}return t.prototype.enable=function(){this.disconnectObserver(),this.select.disabled=!1,this.connectObserver()},t.prototype.disable=function(){this.disconnectObserver(),this.select.disabled=!0,this.connectObserver()},t.prototype.hideUI=function(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")},t.prototype.showUI=function(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")},t.prototype.changeListen=function(t){this.listen=t,this.listen?this.connectObserver():this.disconnectObserver()},t.prototype.addChangeFunc=function(t){this.changeFunc=t,this.addObserver(),this.connectObserver(),this.changeListen(!0)},t.prototype.removeChangeFunc=function(){this.changeListen(!1),this.changeFunc=void 0},t.prototype.setSelected=function(t){for(var e=0,s=this.select.childNodes;e<s.length;e++){var i=s[e];if("OPTGROUP"===i.nodeName)for(var n=0,a=i.childNodes;n<a.length;n++){var o,l=a[n];if("OPTION"===l.nodeName)(o=l).selected=t.includes(o.value)}if("OPTION"===i.nodeName)(o=i).selected=t.includes(o.value)}},t.prototype.observeWrapper=function(t){this.changeFunc&&this.changeFunc(this.getData())},t.prototype.addObserver=function(){this.observer&&(this.disconnectObserver(),this.observer=null),this.observer=new MutationObserver(this.observeWrapper)},t.prototype.connectObserver=function(){this.observer&&this.observer.observe(this.select,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},t.prototype.disconnectObserver=function(){this.observer&&this.observer.disconnect()},t.prototype.getData=function(){for(var t=[],e=0,s=this.select.childNodes;e<s.length;e++){var i=s[e];"OPTGROUP"===i.nodeName&&t.push(this.getDataFromOptgroup(i)),"OPTION"===i.nodeName&&t.push(this.getDataFromOption(i))}return t},t.prototype.getDataFromOptgroup=function(t){for(var e={id:"",label:t.label,options:[]},s=0,i=t.childNodes;s<i.length;s++){var n=i[s];"OPTION"===n.nodeName&&e.options.push(this.getDataFromOption(n))}return e},t.prototype.getDataFromOption=function(t){return{id:!!t.dataset&&t.dataset.id||e(),value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,display:"none"!==t.style.display,disabled:t.disabled,mandatory:!!t.dataset&&"true"===t.dataset.mandatory,placeholder:"true"===t.dataset.placeholder,class:t.className,style:t.style.cssText,data:t.dataset}},t.prototype.updateSelect=function(t,e,s){var i=this;t&&(this.select.id=t),e&&(this.select.style.cssText=e),s&&(this.select.className="",s.forEach((function(t){""!==t.trim()&&i.select.classList.add(t.trim())})))},t.prototype.updateOptions=function(t){this.select.innerHTML="";for(var e=0,s=t;e<s.length;e++){var i=s[e];i instanceof a&&this.select.appendChild(this.createOptgroup(i)),i instanceof o&&this.select.appendChild(this.createOption(i))}},t.prototype.createOptgroup=function(t){var e=document.createElement("optgroup");if(e.id=t.id,e.label=t.label,t.options)for(var s=0,i=t.options;s<i.length;s++){var n=i[s];e.appendChild(this.createOption(n))}return e},t.prototype.createOption=function(t){var e=document.createElement("option");return e.value=""!==t.value?t.value:t.text,e.innerHTML=t.html||t.text,t.selected&&(e.selected=t.selected),t.disabled&&(e.disabled=!0),!1===t.display&&(e.style.display="none"),t.placeholder&&e.setAttribute("data-placeholder","true"),t.mandatory&&e.setAttribute("data-mandatory","true"),t.class&&t.class.split(" ").forEach((function(t){e.classList.add(t)})),t.data&&"object"==typeof t.data&&Object.keys(t.data).forEach((function(s){e.setAttribute("data-"+n(s),t.data[s])})),e},t}(),h=function(t){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isTabbing=!1,t||(t={}),this.id="ss-"+e(),this.style=t.style||"",this.class=t.class||[],this.isEnabled=void 0===t.isEnabled||t.isEnabled,this.showSearch=void 0===t.showSearch||t.showSearch,this.searchPlaceholder=t.searchPlaceholder||"Search",this.searchText=t.searchText||"No Results",this.searchingText=t.searchingText||"Searching...",this.searchHighlight=void 0!==t.searchHighlight&&t.searchHighlight,this.closeOnSelect=void 0===t.closeOnSelect||t.closeOnSelect,this.contentLocation=t.contentLocation||document.body,this.contentPosition=t.contentPosition||"auto",this.placeholderText=t.placeholderText||"Select Value",this.allowDeselect=void 0!==t.allowDeselect&&t.allowDeselect,this.hideSelected=void 0!==t.hideSelected&&t.hideSelected,this.useHtml=void 0!==t.useHtml&&t.useHtml,this.showOptionTooltips=void 0!==t.showOptionTooltips&&t.showOptionTooltips,this.selectByGroup=void 0!==t.selectByGroup&&t.selectByGroup,this.minSelected=t.minSelected||0,this.maxSelected=t.maxSelected||1e3,this.timeoutDelay=t.timeoutDelay||200},d=function(){function t(t){var e=this;if(this.events={search:void 0,searchFilter:function(t,e){return-1!==t.text.toLowerCase().indexOf(e.toLowerCase())},addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=i((function(){e.settings.isOpen&&e.render.moveContent()})),this.windowScroll=i((function(){e.settings.isOpen&&("up"===e.render.putContent(e.render.content.main,e.settings.isOpen)?e.render.moveContentAbove():e.render.moveContentBelow())})),this.documentClick=function(t){e.settings.isOpen&&t.target&&!s(t.target,e.settings.id)&&e.close()},this.selectEl="string"==typeof t.select?document.querySelector(t.select):t.select,!this.selectEl)throw new Error("Could not find select element");if("SELECT"!==this.selectEl.tagName)throw new Error("Element isnt of type select");for(var n in this.selectEl.dataset.ssid&&this.destroy(),this.settings=new h(t.settings),t.events)t.events.hasOwnProperty(n)&&(this.events[n]=t.events[n]);this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new c(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.store=new l(t.data?t.data:this.select.getData()),t.data&&this.select.updateOptions(this.store.getData());var a={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new r(this.settings,this.store,a),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),document.addEventListener("click",this.documentClick),window.addEventListener("resize",this.windowResize,!1),"auto"===this.settings.contentPosition&&window.addEventListener("scroll",this.windowScroll,!1),this.settings.isEnabled||this.disable(),this.selectEl.slim=this}return t.prototype.enable=function(){this.settings.isEnabled=!0,this.select.enable(),this.render.enable()},t.prototype.disable=function(){this.settings.isEnabled=!1,this.select.disable(),this.render.disable()},t.prototype.getData=function(){return this.store.getData()},t.prototype.getSelected=function(){return this.store.getSelected()},t.prototype.getSelectedOptions=function(){return this.store.getSelectedOptions()},t.prototype.setSelected=function(t,e){void 0===e&&(e=!0),this.store.setSelectedBy("value",Array.isArray(t)?t:[t]);var s=this.store.getData();this.select.updateOptions(s),this.render.renderValues(),this.render.renderOptions(s),e&&this.close()},t.prototype.setData=function(t){this.store.setData(t),this.select.updateOptions(this.store.getData()),this.render.renderOptions(this.store.getData())},t.prototype.addOption=function(t){this.store.addOption(t);var e=this.store.getData();this.select.updateOptions(e),this.render.renderValues(),this.render.renderOptions(e)},t.prototype.open=function(){var t=this;this.settings.isEnabled&&(this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),setTimeout((function(){t.settings.isOpen=!0,t.settings.showSearch&&t.render.content.search.input.focus(),t.events.afterOpen&&t.events.afterOpen()}),this.settings.timeoutDelay)))},t.prototype.close=function(){var t=this;this.settings.isOpen&&(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),this.settings.isOpen=!1,this.search(""),setTimeout((function(){t.render.content.search.input.blur(),t.events.afterClose&&t.events.afterClose()}),this.settings.timeoutDelay))},t.prototype.search=function(t){var e=this;if(this.render.content.search.input.value!==t&&(this.render.content.search.input.value=t),this.events.search){this.render.renderSearching();var s=this.events.search(t,this.store.getSelected());s instanceof Promise?s.then((function(t){e.render.renderOptions(e.store.partialToFullData(t))})).catch((function(t){e.render.renderError("string"==typeof t?t:t.message)})):Array.isArray(s)?this.render.renderOptions(this.store.partialToFullData(s)):this.render.renderError("Search event must return a promise or an array of data")}else this.render.renderOptions(""===t?this.store.getData():this.store.search(t))},t.prototype.destroy=function(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),"auto"===this.settings.contentPosition&&window.removeEventListener("scroll",this.windowScroll,!1),this.render.destroy(),this.select.showUI()},t}();t.Optgroup=a,t.Option=o,t.debounce=i,t.default=d,t.generateID=e,t.hasClassInTree=s,t.kebabCase=n,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=slimselect.umd.js.map
